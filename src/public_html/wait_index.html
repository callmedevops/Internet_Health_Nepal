<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/png" sizes="16x16" href="plugins/images/23.jpg">
    <title>Internet Health Nepal</title>
    <!-- Bootstrap Core CSS -->
    <link href="bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Menu CSS -->
    <link href="plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.css" rel="stylesheet">
    <!-- chartist CSS -->
    <link href="plugins/bower_components/chartist-js/dist/chartist.min.css" rel="stylesheet">
    <link href="plugins/bower_components/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.css" rel="stylesheet">
    <!-- animation CSS -->
    <link href="css/animate.css" rel="stylesheet">
    <!-- morris CSS -->
    <link href="plugins/bower_components/morrisjs/morris.css" rel="stylesheet">
    <!--Gauge chart CSS -->
    <link href="plugins/bower_components/Minimal-Gauge-chart/css/cmGauge.css" rel="stylesheet" type="text/css" />
    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet">
    <!-- color CSS -->
    <link href="css/colors/megna-dark.css" id="theme" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body class="fix-header">
    <!-- ============================================================== -->
    <!-- Preloader -->
    <!-- ============================================================== -->
    
    <!-- ============================================================== -->
    <!-- Wrapper -->
    <!-- ============================================================== -->
    <div id="wrapper">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->
        <nav class="navbar navbar-default navbar-static-top m-b-0">
            <div class="navbar-header">
                <div class="top-left-part">
                    <!-- Logo -->
                    <a class="logo" href="https://www.internethealthnepal.com">
                        <!-- Logo icon image, you can use font-icon also --><b>
                        <!--This is dark logo icon--><img src="plugins/images/23.jgp" width="35px" alt="home" class="dark-logo" /><!--This is light logo icon--><img src="plugins/images/23.jpg" width="35px" alt="home" class="light-logo" />
                     </b>
                        <!-- Logo text image you can use text also --><span class="hidden-xs">
                        <!--This is dark logo text--><img src="../ihn.png" width="170px" alt="home" class="dark-logo" /><!--This is light logo text--><img src="plugins/images/ihn.png" width="170px"alt="home" class="light-logo" />
                     </span> </a>
                </div>
                <!-- /Logo -->
               
                    <!-- /.Megamenu -->
                </ul>
                <ul class="nav navbar-top-links navbar-left">
                    <li><a href="javascript:void(0)" class="open-close waves-effect waves-light"><i class="ti-menu"></i></a></li>
                    <li class="dropdown">
                    </li>

                </ul>
                <ul class="nav navbar-top-links navbar-right pull-right">
                     <li style="" class="dropdown">
                        <a class="dropdown-toggle profile-pic" data-toggle="dropdown" href="#">
                            <button class="btn btn-warning" >LOGIN</button><b class="hidden-xs"></b><span class="caret"></span> </a>
                        <ul class="dropdown-menu dropdown-user animated flipInY">
                            <li>
                                <div class="dw-user-box">
                                    <a href="#" class="fb btn">
          <i class="fa fa-facebook fa-fw"></i> Login with Facebook
        </a>
        
        <a href="#" class="google btn">
          <i class="fa fa-google fa-fw"></i> Login with Google+
        </a>
                                </div>
                            </li>
                    
<!--
                            </li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#"><i class="ti-user"></i> My Profile</a></li>
                            <li><a href="#"><i class="ti-wallet"></i> My Balance</a></li>
                            <li><a href="#"><i class="ti-email"></i> Inbox</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#"><i class="ti-settings"></i> Account Setting</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#"><i class="fa fa-power-off"></i> Logout</a></li>
-->
                        </ul>

                        <!-- /.dropdown-user -->
                    </li>
                    <!-- /.dropdown -->
                </ul>
            </div>
            <!-- /.navbar-header -->
            <!-- /.navbar-top-links -->
            <!-- /.navbar-static-side -->
        </nav>
        <!-- End Top Navigation -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav slimscrollsidebar">
                <div class="sidebar-head">
                    <h3> <span class="hide-menu">Navigation</span></h3>
                </div>
                <ul class="nav" id="side-menu">
                    <li class="user-pro">   
                    </li>
                    <li> <a href="index.html" class="waves-effect active"><i class="mdi mdi-av-timer fa-fw" data-icon="v"></i> <span class="hide-menu"> Dashboard</span></a>
                        
                    </li>
                    <li> <a href="#" class="waves-effect"><i class="mdi mdi-chart-bar fa-fw"></i> <span class="hide-menu">Test Statistics</span></a>
                    </li>


                    <li> <a href="#" class="waves-effect"><i class="mdi mdi-comment-multiple-outline fa-fw"></i><span class="hide-menu">Feedbacks</span></a>
                        
                    </li>
                    <li><a href="aboutus.html" class="waves-effect"><i class="mdi mdi-account-multiple fa-fw"></i><span class="hide-menu">About Us</span></a>
                    </li>

                    <li><a href="#" class="waves-effect"><i class="mdi mdi-key-change fa-fw"></i><span class="hide-menu">Privacy Policy</span></a>
                    </li>

                    <li><a href="#" class="waves-effect"><i class="mdi mdi-help fa-fw"></i><span class="hide-menu">FAQs</span></a>
                    </li>
                   
                </ul>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- End Left Sidebar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page Content -->
        <!-- ============================================================== -->
        
                
               <div id="page-wrapper">
            <div class="container-fluid text-center">
                 <button class="btn btn-primary" id="startStopBtn" onclick="startStop()" style="display:inline-block;padding:1rem 7rem;margin-top:3em;">Start</button>
                
                <div class="row" style="margin-top:5rem;">
                    <div class="col-md-3 col-sm-10">
                        <div id="gauseDownloadBorder" class= "border">
                            <div id="gaugeDownload" class="gauge gauge-big gauge-red">
                                <div class="gauge-arrow" data-percentage="0" style="transform: rotate(0deg);"> </div>
                                                                <br><br>
                            <h3 style="margin-top: -3rem;"><span id="download">0.00</span> Mbps</h3>
                            <h4>Download</h4>
                               
                            </div>
                        </div>
                        <br>
                    </div>
                    <div class="col-md-3 col-sm-10">
                        <div id="gauseDownloadBorder" class= "border">
                            <div id="gaugeUpload" class="gauge gauge-big gauge-red">
                                <div class="gauge-arrow" data-percentage="0" style="transform: rotate(0deg);"> </div>
                                                                <br><br>
                            <h3 style="margin-top: -3rem;"><span id="upload">0.00</span> Mbps</h3>
                            <h4>Upload</h4>
                               
                            </div>
                        </div>
                        <br>
                    </div>
                    <div class="col-md-3 col-sm-10">
                        <div id="gauseDownloadBorder" class= "border">
                            <div id="gaugePing" class="gauge gauge-big gauge-red">
                                <div class="gauge-arrow" data-percentage="0" style="transform: rotate(0deg);"> </div>
                                <br><br>
                            <h3 style="margin-top: -3rem;"><span id="ping">0.00</span> ms</h3>
                            <h4>Ping</h4>
                               
                            </div>
                        </div>
                        <br><br>
                        <br>
                    </div>
                    <div class="col-md-3 col-sm-10">
                        <div id="gaugeDownloadBorder" class= "border">
                            <div id="gaugeJitter" class="gauge gauge-big gauge-red">
                                <div class="gauge-arrow" data-percentage="0" style="transform: rotate(0deg);"> </div>
                                <br><br>
                            <h3 style="margin-top: -3rem;"><span id="jitter">0.00</span> ms</h3>
                            <h4>Jitter</h4>
                               
                            </div>
                        </div>
                        </div>

                    </div>
                    </div>
            
        <div class="progress">
  <div class="progress-bar" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
    <span class="sr-only">70% Complete</span>
  </div>
</div>         

             <div class="row text-center" style="padding: 0.5rem;background: #FFF;">
                 <div class="col-md-12">
                     <h3>IP-address : <span id="ip"></span>, 
                     ISP : <span id="isp"></span>, 
                     Location : <span id="location"></span></h3>
                </div>
            </div>
            
            </div>
    </div>


                

            
    <!-- /#wrapper -->
    <!-- jQuery -->
    <script src="../plugins/bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Menu Plugin JavaScript -->
    <script src="../plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.js"></script>
    <!--slimscroll JavaScript -->
    <script src="js/jquery.slimscroll.js"></script>
    <!--Wave Effects -->
    <script src="js/waves.js"></script>
    <!--Morris JavaScript -->
    <script src="../plugins/bower_components/raphael/raphael-min.js"></script>
    <script src="../plugins/bower_components/morrisjs/morris.js"></script>
    <!-- Flot Charts JavaScript -->
    <script src="../plugins/bower_components/flot/jquery.flot.js"></script>
    <script src="../plugins/bower_components/flot.tooltip/js/jquery.flot.tooltip.min.js"></script>
    <!-- Animated skill bar -->
    <script src="../plugins/bower_components/AnimatedSkillsDiagram/js/animated-bar.js"></script>
    <!-- chartist chart -->
    <script src="../plugins/bower_components/chartist-js/dist/chartist.min.js"></script>
    <script src="../plugins/bower_components/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.min.js"></script>
    <!-- Guage chart -->
    <script src="../plugins/bower_components/Minimal-Gauge-chart/js/cmGauge.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="js/custom.min.js"></script>
    <script src="js/dashboard2.js"></script>
    <!--Style Switcher -->
    <script src="../plugins/bower_components/styleswitcher/jQuery.style.switcher.js"></script>
        
        <script>
            $('#gaugeDownload .gauge-arrow').cmGauge();
            $('#gaugeUpload .gauge-arrow').cmGauge();
            $('#gaugePing .gauge-arrow').cmGauge();
            $('#gaugeJitter .gauge-arrow').cmGauge();
            
             function I(id){return document.getElementById(id);}
            //SPEEDTEST AND UI CODE
            var w=null; //speedtest worker
            var data=null; //data from worker
            function startStop(){
              if(w!=null){
                //speedtest is running, abort
                w.postMessage('abort');
                w=null;
                data=null;
            
                $("#startStopBtn").removeClass("btn-danger");
                $("#startStopBtn").addClass("btn-primary");
                $("#startStopBtn").html("Start");
                initGauge();
              }
                else {
                //test is not running, begin
            
                w=new Worker('speedtest_worker.js');
                w.postMessage('start'); //Add optional parameters as a JSON object to this command
                $("#startStopBtn").removeClass("btn-primary");
                $("#startStopBtn").addClass("btn-danger");
                $("#startStopBtn").html("Abort");

                    initGauge();

                  w.onmessage=function(e)
                  {
                  data=e.data.split(';');
                  var status=Number(data[0]);
                  if(status>=4){
//test completed
                    $("#startStopBtn").removeClass("btn-danger");
                    $("#startStopBtn").addClass("btn-primary");
                    $("#startStopBtn").html("Start");
                    w=null;
                    updateGauge(true);
                  }
                };
              }
            }
            
            function sleep (time) {
              return new Promise((resolve) => setTimeout(resolve, time));
            }


            //this function reads the data sent back by the worker and updates the UI
            function updateGauge(forced){
            
              if(!forced&&(!data||!w)) return;
              var status = Number(data[0]);
              I("ip").textContent=data[4].split("-")[0];
                I("isp").textContent=data[4].split("-")[1].split(",")[0];
                I("location").textContent=data[4].split("-")[1].split(",")[1];
                if (status == 1 && data[1] != 0){
                                $('#gaugeDownload .gauge-arrow').trigger('updateGauge',data[1]/20);
                        $("#download").html(data[1]);
                }
            
                if (status == 3 && Number(data[2]) > 0){
                  sleep(100).then(()=> {
                $('#gaugeUpload .gauge-arrow').trigger('updateGauge', data[2]/20);
                      $("#upload").html(data[2]);
                  })
                }
            
                if (status == 2 && Number(data[3]) > 0){
                  sleep(100).then(()=> {
                $('#gaugePing .gauge-arrow').trigger('updateGauge', data[3]);
                      $("#ping").html(data[3]);
                    })
                }
            
                if (status == 2 && (data[5]) > 0){
                   sleep(100).then(()=> {
                       $('#gaugeJitter .gauge-arrow').trigger('updateGauge', data[5]);
                       $("#jitter").html(data[5]);
                    })
                }
              var prog = (Number(data[6]) * 2 + Number(data[7]) * 2 + Number(data[8])) / 5;
                $(".progress-bar").css("width", (100 * prog) + "%");
            }
            
            //poll the status from the worker (this will call updateGauge)
            setInterval(function(){
              if(w) w.postMessage('status');
            },200);
            
            //update the UI every frame

            window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||(function(callback,element){setTimeout(callback,1000/60);});
            
            function frame(){
              requestAnimationFrame(frame);
              updateGauge();
            }
            
            frame(); //start frame loop
            
           // function to (re)initialize UI
            
            function initGauge(){
                $('#gaugeDownload .gauge-arrow').trigger('updateGauge', '0');
                $('#gaugeUpload .gauge-arrow').trigger('updateGauge', '0');
                $('#gaugePing .gauge-arrow').trigger('updateGauge', '0');
                $('#gaugeJitter .gauge-arrow').trigger('updateGauge', '0');
                
                $("#download").html("0.00");
                $("#upload").html("0.00");
                $("#ping").html("0.00");
                $("#jitter").html("0.00");
            }
        </script>
                <!-- ============================================================== -->
                <!-- Right sidebar -->
                <!-- ============================================================== -->
                <!-- .right-sidebar -->
                
                <!-- End Right sidebar -->
                <!-- ============================================================== -->
            </div>
            <!-- /.container-fluid -->
            <footer class="footer text-center">copyright &#169; 2018 All rights reserved. INTERNET HEALTH NEPAL</footer>
        </div>
        <!-- ============================================================== -->
        <!-- End Page Content -->
        <!-- ============================================================== -->
    </div>
    <!-- /#wrapper -->
    <!-- jQuery -->
    <script src="plugins/bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap Core JavaScript --><!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/png" sizes="16x16" href="../plugins/images/23.jpg">
    <title>Internet Health Nepal</title>
    <!-- Bootstrap Core CSS -->
    <link href="bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Menu CSS -->
    <link href="../plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.css" rel="stylesheet">
    <!-- chartist CSS -->
    <link href="../plugins/bower_components/chartist-js/dist/chartist.min.css" rel="stylesheet">
    <link href="../plugins/bower_components/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.css" rel="stylesheet">
    <!-- animation CSS -->
    <link href="css/animate.css" rel="stylesheet">
    <!-- morris CSS -->
    <link href="../plugins/bower_components/morrisjs/morris.css" rel="stylesheet">
    <!--Gauge chart CSS -->
    <link href="../plugins/bower_components/Minimal-Gauge-chart/css/cmGauge.css" rel="stylesheet" type="text/css" />
    <!-- Custom CSS -->
    <link href="css/style.css" rel="stylesheet">
    <!-- color CSS -->
    <link href="css/colors/megna-dark.css" id="theme" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</head>

<body class="fix-header">
    <!-- ============================================================== -->
    <!-- Preloader -->
    <!-- ============================================================== -->
    <!-- Wrapper -->
    <!-- ============================================================== -->
    <div id="wrapper">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->
        <nav class="navbar navbar-default navbar-static-top m-b-0">
            <div class="navbar-header">

                <div class="top-left-part">
                    <!-- Logo -->
                    <a class="logo" href="index.html">
                        <!-- Logo icon image, you can use font-icon also --><b>
                        <!--This is dark logo icon--><img src="../plugins/images/23.jgp" width="35px" alt="home" class="dark-logo" /><!--This is light logo icon--><img src="../plugins/images/23.jpg" width="35px" alt="home" class="light-logo" />
                     </b>
                        <!-- Logo text image you can use text also --><span class="hidden-xs">
                        <!--This is dark logo text--><img src="../ihn.png" width="170px" alt="home" class="dark-logo" /><!--This is light logo text--><img src="../plugins/images/ihn.png" width="170px"alt="home" class="light-logo" />
                     </span> </a>
                </div>
                <!-- /Logo -->
                <!-- Search input and Toggle icon -->
                
                
                <ul class="nav navbar-top-links navbar-left">
                    <li><a href="javascript:void(0)" class="open-close waves-effect waves-light"><i class="ti-menu"></i></a></li>
                    <li class="dropdown">
                        
                        
                        </ul>
                        <!-- /.dropdown-messages -->
                    </li>

                    <!-- /.Megamenu -->
                </ul>
                <ul class="nav navbar-top-links navbar-right pull-right">
                     <li style="" class="dropdown">
                        <a class="dropdown-toggle profile-pic" data-toggle="dropdown" href="#">
                            <button class="btn btn-primary" >LOGIN</button><b class="hidden-xs"></b><span class="caret"></span> </a>
                        <ul class="dropdown-menu dropdown-user animated flipInY">
                            <li>
                                <div class="dw-user-box">
                                    <a href="#" class="fb btn">
          <i class="fa fa-facebook fa-fw"></i> Login with Facebook
        </a>
        
        <a href="#" class="google btn">
          <i class="fa fa-google fa-fw"></i> Login with Google+
        </a>
                                </div>
                            </li>
<!--
                            </li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#"><i class="ti-user"></i> My Profile</a></li>
                            <li><a href="#"><i class="ti-wallet"></i> My Balance</a></li>
                            <li><a href="#"><i class="ti-email"></i> Inbox</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#"><i class="ti-settings"></i> Account Setting</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#"><i class="fa fa-power-off"></i> Logout</a></li>
-->
                        </ul>
                        <!-- /.dropdown-user -->
                    </li>
                    <!-- /.dropdown -->
                </ul>
            </div>
            <!-- /.navbar-header -->
            <!-- /.navbar-top-links -->
            <!-- /.navbar-static-side -->
        </nav>
        <!-- End Top Navigation -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
       <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav slimscrollsidebar">
                <div class="sidebar-head">
                    <h3><span class="fa-fw open-close"><i class="ti-close ti-menu"></i></span> <span class="hide-menu">Navigation</span></h3>
                </div>
                <ul class="nav" id="side-menu">
                    <li class="user-pro">   
                    </li>
                    <li> <a href="index.html" class="waves-effect active"><i class="mdi mdi-av-timer fa-fw" data-icon="v"></i> <span class="hide-menu"> Dashboard</span></a>
                        
                    </li>
                    <li> <a href="#" class="waves-effect"><i class="mdi mdi-chart-bar fa-fw"></i> <span class="hide-menu">Test Statistics</span></a>
                    </li>


                    <li> <a href="#" class="waves-effect"><i class="mdi mdi-comment-multiple-outline fa-fw"></i><span class="hide-menu">Feedbacks</span></a>
                        
                    </li>
                    <li><a href="inbox.html" class="waves-effect"><i class="mdi mdi-account-multiple fa-fw"></i><span class="hide-menu">About Us</span></a>
                    </li>

                    <li><a href="inbox.html" class="waves-effect"><i class="mdi mdi-key-change fa-fw"></i><span class="hide-menu">Privacy Policy</span></a>
                    </li>

                    <li><a href="inbox.html" class="waves-effect"><i class="mdi mdi-help fa-fw"></i><span class="hide-menu">FAQs</span></a>
                    </li>
                   
                </ul>
            </div>
        </div>
        <div id="page-wrapper">
            <div class="container-fluid text-center">
                 <button class="btn btn-primary" id="startStopBtn" onclick="startStop()" style="display:inline-block;padding:1rem 7rem;margin-top:3em;">Start</button>
                
                <div class="row" style="margin-top:5rem;">
                    <div class="col-md-3 col-sm-10">
                        <div id="gauseDownloadBorder" class= "border">
                            <div id="gaugeDownload" class="gauge gauge-big gauge-red">
                                <div class="gauge-arrow" data-percentage="0" style="transform: rotate(0deg);"> </div>
                                                                <br><br>
                            <h3 style="margin-top: -3rem;"><span id="download">0.00</span> Mbps</h3>
                            <h4>Download</h4>
                               
                            </div>
                        </div>
                        <br>
                    </div>
                    <div class="col-md-3 col-sm-10">
                        <div id="gauseDownloadBorder" class= "border">
                            <div id="gaugeUpload" class="gauge gauge-big gauge-red">
                                <div class="gauge-arrow" data-percentage="0" style="transform: rotate(0deg);"> </div>
                                                                <br><br>
                            <h3 style="margin-top: -3rem;"><span id="upload">0.00</span> Mbps</h3>
                            <h4>Upload</h4>
                               
                            </div>
                        </div>
                        <br>
                    </div>
                    <div class="col-md-3 col-sm-10">
                        <div id="gauseDownloadBorder" class= "border">
                            <div id="gaugePing" class="gauge gauge-big gauge-red">
                                <div class="gauge-arrow" data-percentage="0" style="transform: rotate(0deg);"> </div>
                                <br><br>
                            <h3 style="margin-top: -3rem;"><span id="ping">0.00</span> ms</h3>
                            <h4>Ping</h4>
                               
                            </div>
                        </div>
                        <br><br>
                        <br>
                    </div>
                    <div class="col-md-3 col-sm-10">
                        <div id="gaugeDownloadBorder" class= "border">
                            <div id="gaugeJitter" class="gauge gauge-big gauge-red">
                                <div class="gauge-arrow" data-percentage="0" style="transform: rotate(0deg);"> </div>
                                <br><br>
                            <h3 style="margin-top: -3rem;"><span id="jitter">0.00</span> ms</h3>
                            <h4>Jitter</h4>
                               
                            </div>
                        </div>
                        </div>

                    </div>
                    </div>
            
        <div class="progress">
  <div class="progress-bar" role="progressbar" aria-valuenow="70"
  aria-valuemin="0" aria-valuemax="100" style="width:0%">
    <span class="sr-only">70% Complete</span>
  </div>
</div>         

             <div class="row text-center" style="padding: 0.5rem;background: #FFF;">
                 <div class="col-md-12">
                     <h3>IP-address : <span id="ip"></span>, 
                     ISP : <span id="isp"></span>, 
                     Location : <span id="location"></span></h3>
                </div>
            </div>
            
            </div>
    </div>


                

            
    <!-- /#wrapper -->
    <!-- jQuery -->
    <script src="../plugins/bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Menu Plugin JavaScript -->
    <script src="../plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.js"></script>
    <!--slimscroll JavaScript -->
    <script src="js/jquery.slimscroll.js"></script>
    <!--Wave Effects -->
    <script src="js/waves.js"></script>
    <!--Morris JavaScript -->
    <script src="../plugins/bower_components/raphael/raphael-min.js"></script>
    <script src="../plugins/bower_components/morrisjs/morris.js"></script>
    <!-- Flot Charts JavaScript -->
    <script src="../plugins/bower_components/flot/jquery.flot.js"></script>
    <script src="../plugins/bower_components/flot.tooltip/js/jquery.flot.tooltip.min.js"></script>
    <!-- Animated skill bar -->
    <script src="../plugins/bower_components/AnimatedSkillsDiagram/js/animated-bar.js"></script>
    <!-- chartist chart -->
    <script src="../plugins/bower_components/chartist-js/dist/chartist.min.js"></script>
    <script src="../plugins/bower_components/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.min.js"></script>
    <!-- Guage chart -->
    <script src="../plugins/bower_components/Minimal-Gauge-chart/js/cmGauge.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="js/custom.min.js"></script>
    <script src="js/dashboard2.js"></script>
    <!--Style Switcher -->
    <script src="../plugins/bower_components/styleswitcher/jQuery.style.switcher.js"></script>
        
        <script>
            $('#gaugeDownload .gauge-arrow').cmGauge();
            $('#gaugeUpload .gauge-arrow').cmGauge();
            $('#gaugePing .gauge-arrow').cmGauge();
            $('#gaugeJitter .gauge-arrow').cmGauge();
            
             function I(id){return document.getElementById(id);}
            //SPEEDTEST AND UI CODE
            var w=null; //speedtest worker
            var data=null; //data from worker
            function startStop(){
              if(w!=null){
                //speedtest is running, abort
                w.postMessage('abort');
                w=null;
                data=null;
            
                $("#startStopBtn").removeClass("btn-danger");
                $("#startStopBtn").addClass("btn-primary");
                $("#startStopBtn").html("Start");
                initGauge();
              }
                else {
                //test is not running, begin
            
                w=new Worker('speedtest_worker.js');
                w.postMessage('start'); //Add optional parameters as a JSON object to this command
                $("#startStopBtn").removeClass("btn-primary");
                $("#startStopBtn").addClass("btn-danger");
                $("#startStopBtn").html("Abort");

                    initGauge();

                  w.onmessage=function(e)
                  {
                  data=e.data.split(';');
                  var status=Number(data[0]);
                  if(status>=4){
//test completed
                    $("#startStopBtn").removeClass("btn-danger");
                    $("#startStopBtn").addClass("btn-primary");
                    $("#startStopBtn").html("Start");
                    w=null;
                    updateGauge(true);
                  }
                };
              }
            }
            
            function sleep (time) {
              return new Promise((resolve) => setTimeout(resolve, time));
            }


            //this function reads the data sent back by the worker and updates the UI
            function updateGauge(forced){
            
              if(!forced&&(!data||!w)) return;
              var status = Number(data[0]);
              I("ip").textContent=data[4].split("-")[0];
                I("isp").textContent=data[4].split("-")[1].split(",")[0];
                I("location").textContent=data[4].split("-")[1].split(",")[1];
                if (status == 1 && data[1] != 0){
                                $('#gaugeDownload .gauge-arrow').trigger('updateGauge',data[1]/20);
                        $("#download").html(data[1]);
                }
            
                if (status == 3 && Number(data[2]) > 0){
                  sleep(100).then(()=> {
                $('#gaugeUpload .gauge-arrow').trigger('updateGauge', data[2]/20);
                      $("#upload").html(data[2]);
                  })
                }
            
                if (status == 2 && Number(data[3]) > 0){
                  sleep(100).then(()=> {
                $('#gaugePing .gauge-arrow').trigger('updateGauge', data[3]);
                      $("#ping").html(data[3]);
                    })
                }
            
                if (status == 2 && (data[5]) > 0){
                   sleep(100).then(()=> {
                       $('#gaugeJitter .gauge-arrow').trigger('updateGauge', data[5]);
                       $("#jitter").html(data[5]);
                    })
                }
              var prog = (Number(data[6]) * 2 + Number(data[7]) * 2 + Number(data[8])) / 5;
                $(".progress-bar").css("width", (100 * prog) + "%");
            }
            
            //poll the status from the worker (this will call updateGauge)
            setInterval(function(){
              if(w) w.postMessage('status');
            },200);
            
            //update the UI every frame

            window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||(function(callback,element){setTimeout(callback,1000/60);});
            
            function frame(){
              requestAnimationFrame(frame);
              updateGauge();
            }
            
            frame(); //start frame loop
            
           // function to (re)initialize UI
            
            function initGauge(){
                $('#gaugeDownload .gauge-arrow').trigger('updateGauge', '0');
                $('#gaugeUpload .gauge-arrow').trigger('updateGauge', '0');
                $('#gaugePing .gauge-arrow').trigger('updateGauge', '0');
                $('#gaugeJitter .gauge-arrow').trigger('updateGauge', '0');
                
                $("#download").html("0.00");
                $("#upload").html("0.00");
                $("#ping").html("0.00");
                $("#jitter").html("0.00");
            }
        </script>   
    <footer>
         <div style="background-color: #23282d; padding-top: 25px; padding-bottom: 20px; height: 50px;">
        <p class="p1" style="text-align: center;padding-left:12%;padding-bottom: 0%;  color: #dddddd;"><span style="color: #c2c0c0;">© 2018 InternetHealthNepal</span></p>
        </div>
    </footer>


    <script src="bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Menu Plugin JavaScript -->
    <script src="plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.js"></script>
    <!--slimscroll JavaScript -->
    <script src="js/jquery.slimscroll.js"></script>
    <!--Wave Effects -->
    <script src="js/waves.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="js/custom.min.js"></script>
    <!--Style Switcher -->
    <script src="plugins/bower_components/styleswitcher/jQuery.style.switcher.js"></script>
</body>

</html>
